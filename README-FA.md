# SubGenix
<img src="https://s6.uupload.ir/files/2_8aog.png" alt="image script" width="400" height="400" style="border-radius:15px;">
SubGenix یک برنامه وب قدرتمند برای تولید و ترجمه زیرنویس از فایل‌های صوتی یا ویدیویی است. این پروژه با استفاده از Flask، Whisper و SocketIO ساخته شده و رابط کاربری ساده‌ای برای تبدیل گفتار به زیرنویس و ترجمه آن به زبان‌های مختلف ارائه می‌دهد. SubGenix با نمایش پیشرفت لحظه‌ای دانلود مدل و تولید زیرنویس، ابزاری کارآمد برای تولیدکنندگان محتوا، مترجمان و توسعه‌دهندگان است.

## ویژگی‌ها

- **تولید زیرنویس**: تبدیل فایل‌های صوتی/ویدیویی به زیرنویس با استفاده از مدل‌های Whisper (`tiny`، `small`، `medium`).
- **ترجمه**: ترجمه زیرنویس‌های تولیدشده به زبان‌های مختلف با استفاده از Google Translate.
- **پیگیری لحظه‌ای**: نمایش نوار پیشرفت برای دانلود مدل و تولید زیرنویس.
- **رابط چندزبانه**: پشتیبانی از زبان‌های فارسی و انگلیسی با تغییر خودکار جهت متن (راست به چپ/چپ به راست).
- **پیش‌نمایش و دانلود**: پیش‌نمایش زیرنویس‌ها در مرورگر و دانلود به‌صورت فایل `.srt`.
- **مدیریت خطاها**: گزارش دقیق خطاها در پردازش فایل، بارگذاری مدل و ترجمه.

## پیش‌نیازها

برای اجرای SubGenix، باید موارد زیر را نصب کنید:

- **پایتون**: نسخه 3.8 یا بالاتر. می‌توانید آن را از [python.org](https://www.python.org/downloads/) دانلود و نصب کنید.
- یک مرورگر وب مدرن (مانند کروم، فایرفاکس یا اج) برای دسترسی به رابط کاربری.
- اتصال به اینترنت (برای دانلود مدل‌های Whisper و خدمات ترجمه).

## نصب

برای راه‌اندازی SubGenix روی سیستم خود، مراحل زیر را دنبال کنید:

1. **دریافت پروژه**:
   ```bash
   git clone https://github.com/tahasite/SubGenix.git
   cd SubGenix
   ```

2. **ایجاد محیط مجازی** (توصیه می‌شود):
   ```bash
   python -m venv venv
   source venv/bin/activate  # در ویندوز: venv\Scripts\activate
   ```

3. **نصب وابستگی‌ها**:
   مطمئن شوید که `pip` نصب شده است، سپس اجرا کنید:
   ```bash
   pip install -r requirements.txt
   ```
   فایل `requirements.txt` شامل موارد زیر است:
   - Flask==2.3.3
   - flask-socketio==5.3.6
   - openai-whisper==20231117
   - librosa==0.10.2
   - deep-translator==1.11.4
   - werkzeug==3.0.1
   - regex==2023.12.25

4. **بررسی نصب پایتون**:
   مطمئن شوید پایتون به‌درستی نصب شده است:
   ```bash
   python --version
   ```
   اگر این دستور کار نکرد، بررسی کنید که پایتون نصب شده و به PATH سیستم اضافه شده باشد.

## نحوه استفاده

1. **اجرای برنامه**:
   سرور Flask را اجرا کنید:
   ```bash
   python app.py
   ```
   سرور به‌صورت پیش‌فرض روی `http://localhost:5000` اجرا می‌شود.

2. **دسترسی به رابط کاربری**:
   مرورگر خود را باز کنید و به آدرس `http://localhost:5000` بروید.

3. **تولید زیرنویس**:
   - تب **تولید** را انتخاب کنید.
   - یک فایل صوتی یا ویدیویی (حداکثر 500 مگابایت) آپلود کنید.
   - مدل Whisper را انتخاب کنید (`tiny`، `small` یا `medium`).
   - زبان مبدأ را انتخاب کنید یا گزینه «تشخیص خودکار» را برگزینید.
   - روی **تولید زیرنویس** کلیک کنید.
   - نوار پیشرفت دانلود مدل (در صورت نیاز) و تولید زیرنویس را مشاهده کنید.
   - پس از اتمام، فایل `.srt` را دانلود کنید یا زیرنویس‌ها را پیش‌نمایش کنید.

4. **ترجمه زیرنویس**:
   - به تب **ترجمه** بروید.
   - فایل `.srt` تولیدشده (که به‌صورت خودکار انتخاب شده) را بررسی کنید.
   - زبان مقصد را انتخاب کنید.
   - روی **ترجمه زیرنویس** کلیک کنید.
   - فایل `.srt` ترجمه‌شده را دانلود یا پیش‌نمایش کنید.

## پیگیری پیشرفت

- **دانلود مدل**: اگر مدل Whisper در سیستم موجود نباشد، نوار پیشرفت دانلود نمایش داده می‌شود (مثلاً «در حال دانلود مدل... (tiny، 72.1MB از 75MB)»).
- **تولید زیرنویس**: پیشرفت بر اساس زمان پایان هر قطعه زیرنویس نسبت به مدت‌زمان کل فایل محاسبه می‌شود (مثلاً قطعه‌ای با پایان 41.36 ثانیه در یک ویدیوی 23 دقیقه‌ای حدود 3% پیشرفت نشان می‌دهد).

## عیب‌یابی

- **پایتون یافت نشد**:
  مطمئن شوید پایتون نصب شده و به PATH سیستم اضافه شده است. دستور `python --version` را اجرا کنید.
- **ماژول یافت نشد**:
  دوباره دستور `pip install -r requirements.txt` را در محیط مجازی اجرا کنید.
- **نوار پیشرفت گیر می‌کند**:
  لاگ‌های ترمینال را بررسی کنید (مثل `ERROR:__main__:...`). مشکلات رایج:
  - فایل صوتی/ویدیویی نامعتبر: مطمئن شوید فایل از فرمت پشتیبانی‌شده است.
  - مشکلات اینترنت: اتصال خود را برای دانلود مدل یا ترجمه بررسی کنید.
  - خرابی مدل: فایل مدل (مثل `~/.cache/whisper/tiny.pt`) را حذف کنید و دوباره امتحان کنید.
- **خطاهای WebSocket**:
  اگر در کنسول مرورگر پیام `WebSocket disconnected` دیدید، مطمئن شوید فایروال پورت 5000 را مسدود نکرده است.

## مشارکت

از مشارکت شما استقبال می‌کنیم! برای همکاری:

1. پروژه را فورک کنید.
2. شاخه جدیدی بسازید (`git checkout -b feature/your-feature`).
3. تغییرات خود را اعمال و کامیت کنید (`git commit -m "Add your feature"`).
4. شاخه را به گیت‌هاب push کنید (`git push origin feature/your-feature`).
5. یک Pull Request باز کنید.

لطفاً مطمئن شوید کد شما با سبک کدنویسی پروژه سازگار است و تست‌های لازم را شامل می‌شود.


## تقدیر و تشکر

- [OpenAI Whisper](https://github.com/openai/whisper) برای تبدیل گفتار به متن.
- [Flask](https://flask.palletsprojects.com/) و [Flask-SocketIO](https://flask-socketio.readthedocs.io/) برای چارچوب وب و ارتباط لحظه‌ای.
- [librosa](https://librosa.org/) برای تحلیل مدت‌زمان صوت.
- [deep-translator](https://github.com/nidhaloff/deep-translator) برای ترجمه زیرنویس.

## 📞 پشتیبانی و تماس

اگه سوال یا مشکلی داری، می‌تونی از طریق تلگرام با ما در تماس باشی:  
📩 [@tahasite_admin](https://t.me/tahasite_admin)

<img src="https://s6.uupload.ir/files/image_2025-03-12_01-27-52_3a5r.png" alt="QR Code for @AdminTahaSite" width="150" height="150">

