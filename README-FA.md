# SubGenix

<img src="https://s6.uupload.ir/files/2_8aog.png" alt="لوگوی SubGenix" width="400" height="400" style="border-radius:15px;">

SubGenix یک برنامه وب قدرتمند برای تولید و ترجمه زیرنویس از فایل‌های صوتی یا ویدیویی است. این پروژه با استفاده از Flask، Whisper و SocketIO ساخته شده و رابط کاربری ساده‌ای برای تبدیل گفتار به زیرنویس و ترجمه آن به زبان‌های مختلف ارائه می‌دهد. SubGenix با نمایش لحظه‌ای پیشرفت دانلود مدل و تولید زیرنویس، ابزاری کارآمد برای تولیدکنندگان محتوا، مترجمان و توسعه‌دهندگان است.

## 📜 منابع اضافی

- **[README انگلیسی (README.md)](README.md)** - راهنمای جامع به زبان انگلیسی

## ویژگی‌ها

- **تولید زیرنویس**: تبدیل فایل‌های صوتی/ویدیویی به زیرنویس با استفاده از مدل‌های Whisper (`tiny`، `small`، `medium`).
- **ترجمه**: ترجمه زیرنویس‌های تولیدشده به زبان‌های مختلف با استفاده از Google Translate.
- **پیگیری لحظه‌ای**: نمایش نوار پیشرفت در رابط کاربری و لاگ‌های دقیق در کنسول (مثل CMD یا PowerShell) برای دانلود مدل و تولید زیرنویس.
- **رابط چندزبانه**: پشتیبانی از زبان‌های فارسی و انگلیسی با تغییر خودکار جهت متن (راست به چپ/چپ به راست).
- **پیش‌نمایش و دانلود**: پیش‌نمایش زیرنویس‌ها در مرورگر و دانلود به‌صورت فایل `.srt`.
- **مدیریت خطاها**: نمایش پیام‌های خطای دقیق در رابط کاربری (هشدارها) و کنسول (لاگ‌ها) برای مشکلاتی مثل پردازش فایل، بارگذاری مدل یا ترجمه.

## پیش‌نیازها

برای اجرای SubGenix، موارد زیر را نصب کنید:

- **پایتون**: نسخه 3.8 یا بالاتر. از [python.org](https://www.python.org/downloads/) دانلود کنید.
- یک مرورگر وب مدرن (مانند کروم، فایرفاکس یا اج) برای رابط کاربری.
- اتصال به اینترنت برای دانلود مدل‌های Whisper و خدمات ترجمه.

## نصب

برای راه‌اندازی SubGenix روی سیستم خود، مراحل زیر را دنبال کنید:

1. **دریافت پروژه**:
   ```bash
   git clone https://github.com/tahasite/SubGenix.git
   cd SubGenix
   ```

2. **نصب وابستگی‌ها**:
   مطمئن شوید `pip` نصب شده است، سپس دستورات زیر را اجرا کنید:
   ```bash
   pip install Flask
   pip install flask-socketio
   pip install librosa
   pip install deep-translator
   pip install werkzeug
   pip install python-socketio
   pip install python-engineio
   pip install git+https://github.com/openai/whisper.git@main
   ```

3. **بررسی نصب پایتون**:
   مطمئن شوید پایتون به‌درستی نصب شده است:
   ```bash
   python --version
   ```
   اگر این دستور کار نکرد، بررسی کنید که پایتون نصب شده و به PATH سیستم اضافه شده باشد.

## نحوه استفاده

1. **اجرای برنامه**:
   سرور Flask را اجرا کنید:
   ```bash
   python app.py
   ```
   سرور به‌صورت پیش‌فرض روی `http://localhost:5000` اجرا می‌شود. لاگ‌های کنسول (مثل CMD یا PowerShell) شروع سرور و پیام‌های اجرایی را نشان می‌دهند (مثل `INFO:__main__:Server started on port 5000`).

2. **دسترسی به رابط کاربری**:
   مرورگر خود را باز کنید و به آدرس `http://localhost:5000` بروید.

3. **تولید زیرنویس**:
   - تب **تولید** را انتخاب کنید.
   - یک فایل صوتی یا ویدیویی (حداکثر 500 مگابایت) آپلود کنید.
   - مدل Whisper را انتخاب کنید (`tiny`، `small` یا `medium`).
   - زبان مبدأ را انتخاب کنید یا گزینه «تشخیص خودکار» را برگزینید.
   - روی **تولید زیرنویس** کلیک کنید.
   - پیشرفت را از طریق نوار پیشرفت در رابط کاربری و لاگ‌های کنسول (مثل `INFO:__main__:Processing segment 1/50`) دنبال کنید.
   - پس از اتمام، فایل `.srt` را دانلود کنید یا زیرنویس‌ها را پیش‌نمایش کنید.

4. **ترجمه زیرنویس**:
   - به تب **ترجمه** بروید.
   - فایل `.srt` تولیدشده (به‌صورت خودکار انتخاب‌شده) را بررسی کنید.
   - زبان مقصد را انتخاب کنید.
   - روی **ترجمه زیرنویس** کلیک کنید.
   - پیشرفت ترجمه را در رابط کاربری و لاگ‌های کنسول (مثل `INFO:__main__:Translating to Spanish (50% complete)`) مشاهده کنید.
   - فایل `.srt` ترجمه‌شده را دانلود یا پیش‌نمایش کنید.

## پیگیری پیشرفت

- **دانلود مدل**: اگر مدل Whisper در سیستم موجود نباشد، نوار پیشرفت در رابط کاربری وضعیت دانلود را نشان می‌دهد (مثل «در حال دانلود مدل... (tiny، 72.1MB از 75MB)»). لاگ‌های کنسول جزئیات را نمایش می‌دهند (مثل `INFO:__main__:Downloading tiny model (50%)`).
- **تولید زیرنویس**: پیشرفت به‌صورت درصدی در رابط کاربری نمایش داده می‌شود و بر اساس زمان پایان هر قطعه زیرنویس نسبت به مدت‌زمان کل فایل محاسبه می‌شود. لاگ‌های کنسول هر قطعه را گزارش می‌دهند (مثل `INFO:__main__:Processed segment at 41.36s (3% complete)`).

## عیب‌یابی

- **پایتون یافت نشد**:
   مطمئن شوید پایتون نصب شده و به PATH سیستم اضافه شده است. دستور `python --version` را اجرا کنید.
- **ماژول یافت نشد**:
   دستورات `pip install` ذکرشده را دوباره اجرا کنید.
- **نوار پیشرفت گیر می‌کند**:
   لاگ‌های کنسول را برای خطاها بررسی کنید (مثل `ERROR:__main__:Invalid audio file`). مشکلات رایج:
   - فایل صوتی/ویدیویی نامعتبر: مطمئن شوید فایل از فرمت پشتیبانی‌شده است.
   - مشکلات اینترنت: اتصال خود را برای دانلود مدل یا ترجمه بررسی کنید.
   - خرابی مدل: فایل مدل (مثل `~/.cache/whisper/tiny.pt`) را حذف کنید و دوباره امتحان کنید.
- **خطاهای WebSocket**:
   اگر در کنسول مرورگر پیام `WebSocket disconnected` دیدید، مطمئن شوید فایروال پورت 5000 را مسدود نکرده است. لاگ‌های کنسول را بررسی کنید (مثل `ERROR:__main__:WebSocket connection failed`).

## مشارکت

از مشارکت شما استقبال می‌کنیم! برای همکاری:

1. پروژه را فورک کنید.
2. شاخه جدیدی بسازید (`git checkout -b feature/your-feature`).
3. تغییرات خود را اعمال و کامیت کنید (`git commit -m "Add your feature"`).
4. شاخه را به گیت‌هاب push کنید (`git push origin feature/your-feature`).
5. یک Pull Request باز کنید.

لطفاً مطمئن شوید کد شما با سبک کدنویسی پروژه سازگار است و تست‌های لازم را شامل می‌شود.

## تقدیر و تشکر

- [OpenAI Whisper](https://github.com/openai/whisper) برای تبدیل گفتار به متن.
- [Flask](https://flask.palletsprojects.com/) و [Flask-SocketIO](https://flask-socketio.readthedocs.io/) برای چارچوب وب و ارتباط لحظه‌ای.
- [librosa](https://librosa.org/) برای تحلیل مدت‌زمان صوت.
- [deep-translator](https://github.com/nidhaloff/deep-translator) برای ترجمه زیرنویس.

## 📞 پشتیبانی و تماس

اگر سوال یا مشکلی دارید، از طریق تلگرام با ما در تماس باشید:  
📩 [@tahasite_admin](https://t.me/tahasite_admin)

<img src="https://s6.uupload.ir/files/image_2025-03-12_01-27-52_3a5r.png" alt="QR Code for @AdminTahaSite" width="150" height="150">

## مجوز

این پروژه تحت مجوز MIT منتشر شده است. برای جزئیات، فایل [LICENSE](LICENSE) را ببینید.

## وضعیت پروژه

SubGenix به‌صورت فعال نگهداری می‌شود. برای ویژگی‌های برنامه‌ریزی‌شده و گزارش اشکالات، بخش [Issues](https://github.com/tahasite/SubGenix/issues) را بررسی کنید.

---

زیرنویس‌گذاری شاد با SubGenix! 🎥