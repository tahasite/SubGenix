# SubGenix

SubGenix یک ابزار وب قدرتمند برای تولید خودکار زیرنویس از فایل‌های صوتی یا ویدیویی و ترجمه آن‌ها به زبان‌های مختلف است. این پروژه از مدل Whisper برای تولید زیرنویس و Google Translator برای ترجمه استفاده می‌کند.

## ویژگی‌ها
- تولید زیرنویس با مدل‌های Whisper (tiny، small، medium)
- ترجمه زیرنویس به زبان‌های مختلف (فارسی، انگلیسی، عربی و غیره)
- رابط کاربری مینیمال و جذاب با انیمیشن‌های مدرن
- نمایش پیشرفت تولید و ترجمه به‌صورت real-time
- پیش‌نمایش فایل‌های زیرنویس در مرورگر
- پشتیبانی از فرمت‌های مختلف (mp4، mp3، wav، m4a، mov و غیره)

## پیش‌نیازها
- **Python 3.8 یا بالاتر**
- **FFmpeg** (برای پردازش فایل‌های صوتی/ویدیویی توسط Whisper)
- اتصال اینترنت (برای دانلود اولیه مدل‌های Whisper و ترجمه)
- مرورگر مدرن (Chrome، Firefox، Edge)

## نصب
1. **کلون کردن پروژه**:
   ```bash
   git clone https://github.com/tahasite/subgenix.git
   cd subgenix
   ```

2. **نصب FFmpeg**:
   - **ویندوز**:
     1. FFmpeg را از [سایت رسمی](https://ffmpeg.org/download.html) دانلود کنید.
     2. فایل را استخراج کرده و مسیر `bin` (مثلاً `C:\ffmpeg\bin`) را به متغیر PATH سیستم اضافه کنید.
     3. در CMD اجرا کنید: `ffmpeg -version` تا نصبを確認 کنید.
   - **لینوکس**:
     ```bash
     sudo apt update
     sudo apt install ffmpeg
     ```
   - **مک**:
     ```bash
     brew install ffmpeg
     ```

3. **ایجاد محیط مجازی (اختیاری اما توصیه‌شده)**:
   ```bash
   python -m venv venv
   source venv/bin/activate  # لینوکس/مک
   venv\Scripts\activate     # ویندوز
   ```

4. **نصب کتابخانه‌ها**:
   ```bash
   pip install -r requirements.txt
   ```

5. **دانلود مدل‌های Whisper**:
   - مدل‌ها (tiny، small، medium) به‌صورت خودکار هنگام اولین اجرا دانلود می‌شوند.
   - فضای موردنیاز:
     - tiny: ~500MB
     - small: ~1.5GB
     - medium: ~5GB
   - مسیر ذخیره: `~/.cache/whisper` (لینوکس/مک) یا `C:\Users\<YourUsername>\.cache\whisper` (ویندوز)

## ساختار پروژه
```
subgenix/
├── static/
│   ├── css/
│   │   └── style.css
│   └── js/
│       └── script.js
├── templates/
│   └── index.html
├── uploads/
├── app.py
├── requirements.txt
├── README.md
```

## اجرا
1. سرور را اجرا کنید:
   ```bash
   python app.py
   ```
2. در مرورگر به آدرس `http://localhost:5000` بروید.
3. فایل صوتی یا ویدیویی آپلود کنید، مدل و زبان را انتخاب کنید، سپس زیرنویس تولید یا ترجمه کنید.

## استفاده
1. **تولید زیرنویس**:
   - در تب "تولید"، فایل (mp4، mp3 و غیره) آپلود کنید.
   - مدل Whisper (tiny، small، medium) و زبان (یا تشخیص خودکار) را انتخاب کنید.
   - دکمه "تولید زیرنویس" را بزنید.
   - پیشرفت را در نوار مشاهده کنید و فایل SRT را دانلود یا پیش‌نمایش کنید.

2. **ترجمه زیرنویس**:
   - پس از تولید زیرنویس، تب "ترجمه" فعال می‌شود.
   - زبان مقصد (مثلاً فارسی) را انتخاب کنید.
   - دکمه "ترجمه زیرنویس" را بزنید.
   - فایل ترجمه‌شده را دانلود یا پیش‌نمایش کنید.

## نکات
- **حداکثر اندازه فایل**: 500MB (قابل تغییر در `app.py`).
- **مدت‌زمان پردازش**: بستگی به مدل و طول فایل دارد (tiny سریع‌تر، medium دقیق‌تر).
- **خطاها**: لاگ‌ها در کنسول یا مرورگر (F12 → Console) بررسی شوند.

## دیباگ
- **خطای FFmpeg**: مطمئن شوید FFmpeg نصب شده و در PATH است.
- **دانلود مدل‌ها**: اتصال اینترنت را بررسی کنید یا مدل‌ها را دستی در `.cache/whisper` کپی کنید.
- **خطای کتابخانه**: نسخه‌های `requirements.txt` را چک کنید.
- **نوار پیشرفت**: اگر پرش دارد، `total_time` را در `app.py` (خط 65) افزایش دهید (مثلاً به 5.0).

## توسعه‌دهندگان
- برای افزودن مدل‌های جدید Whisper، `app.py` (خط 64) و `index.html` (خط 29-33) را ویرایش کنید.
- برای زبان‌های جدید، `index.html` (خط 40-50 و 70-78) را به‌روزرسانی کنید.
- استایل‌های UI در `style.css` قابل سفارشی‌سازی هستند.

## لایسنس
MIT License

## پشتیبانی
ایده یا مشکلی دارید؟ در [GitHub Issues](https://github.com/<your-username>/subgenix/issues) مطرح کنید.
